apiVersion: redhatcop.redhat.io/v1alpha1
kind: VaultSecret
metadata:
  name: github-pat-pipelines
spec:
  vaultSecretDefinitions:
    - authentication:
        path: kubernetes
        role: {{ .Values.app.name }}-vault-role
        serviceAccount:
          name: default
      name: githubtoken
      path: github/token/{{ .Values.app.name }}
      requestType: GET
  output:
    name: {{ .Values.app.name }}-github-pat-pipeline
    type: kubernetes.io/basic-auth
    annotations:
      tekton.dev/git-0: https://github.com
    stringData:
      username: '{{ "{{" }} .githubtoken.org_name {{ "}}" }}'
      password: '{{ "{{" }} .githubtoken.token {{ "}}" }}'